<!DOCTYPE html>
<html lang="en">

<head>
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/v4-shims.css">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      type="text/css" />
   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
   <meta charset="UTF-8">
   <title>Wine not?</title>

   <link rel="stylesheet" href="dc.css">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>

<body class="bg-light">

   <div class="heading-container">
      <p class="heading-paragraph">Wine not?</p>
   </div>

   <nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark">
      <button class="navbar-toggler toggler-example" type="button" data-toggle="collapse"
         data-target="#navbarSupportedContent1" aria-controls="navbarSupportedContent1" aria-expanded="false"
         aria-label="Toggle navigation"><span class="dark-blue-text"><i class="fas fa-bars fa-1x"></i></span></button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent1">
         
         <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item active">
               <a class="nav-link" href="#reviews">Review By Country</a>
            </li>
            <li class="nav-item">
               <a class="nav-link" href="#prices">Wine Prices</a>
            </li>
            <li class="nav-item">
               <a class="nav-link" href="#winery">Winery</a>
            </li>
            <li class="nav-item">
               <a class="nav-link" href="#variety">Variety of Wine</a>
            </li>
            <li class="nav-item">
               <a class="nav-link" href="#price-rating">Price Rating</a>
            </li>
            <li class="nav-item">
               <a class="nav-link" href="#reviews">Reviews</a>
            </li>
         </ul>
         <span class="navbar-text">
               <a class="navbar-brand" href="#winenot">W<span><i class="fas fa-wine-bottle"></i></span>ne Not?</a>
             </span>
      </div>
   </nav>

   <div class="container-fluid">
      <div class="row bg-light">
         <div class="col"></div>
         <div class="col-md-8">
            <blockquote id="winenot" class="blockquote text-center">
               <p> <br>Want to learn about wine? You have come to the right place. Below are several interactive charts,
                  you can use to query
                  the data you love, about the wine you love!<br>

                  <br>Below you will see graphs, which you can click on, in order to filter data on other graphs.<br>

                  <br>This means you get the information you want, when you want, at the click of a button.<br>

                  <br>If you have any questions about the site or feedback, please use our social media listed below in
                  the
                  footer.<br>
               </p>
               <footer class="blockquote-footer">W<span><i class="fas fa-wine-bottle"></i></span>ne Not? Creators</footer>
            </blockquote>
         </div>
         <div class="col"></div>
      </div>

         <h1 class="display-1">W<span><i class="fas fa-wine-bottle"></i></span>ne Charts...</h1>

      <div>
         <div class="row">
            <div style="width: 800px;">
               <div id="mystats" class="dc-data-count" style="float: right">
                  <span class="filter-count"></span> selected out of <span class="total-count"></span> | <a href="javascript:dc.filterAll(); dc.renderAll();">Reset All</a>
               </div>
            </div>
         </div>
         <div style="clear: both; padding-top: 20px;">
            <div>
               <h3 class="display-5"> <i class="fas fa-info"></i> Overview </h3></br>
               <div class="row bg-light">
                  <div class="col-md-4 col-sm-12">
                     <div class="card">
                        <div class="card-body">
                           <h5 class="card-title" id="numCountry"><i class="fas fa-wine-glass"></i> 
                           </h5>
                           <div clas="card-text">
                              of wine reviews come from USA.
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="col-md-4 col-sm-12">
                     <div class="card">
                        <div class="card-body">
                           <h5 class="card-title" id="pnGroup"><i class="fas fa-wine-glass"></i>  

                           </h5>
                           <div clas="card-text">
                              of the wine reviewed is Pinot Noir.
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="col-md-4 col-sm-12">
                     <div class="card">
                        <div class="card-body">
                           <h5 class="card-title" id="tdgGroup"><i class="fas fa-wine-glass"></i> 

                           </h5>
                           <div clas="card-text">
                              of the reviewd wine comes from Terre di Giurfo.
                           </div>
                        </div>
                     </div>
                  </div>


               </div>
               <div class="row bg-light">
                  <div class="col-md-4">
                     <section id="reviews">
                        <h3 class="display-5"> <i class="fas fa-globe-americas"></i> Wines Reviewed by Country</h3>

                        <div class="col">
                           <div id="line"></div>

                        </div>
                     </section>
                  </div>

                  <div class="col-md-4">
                     <section id="prices">
                        <h3 class="display-5"> <i class="fas fa-dollar"></i> Wine Prices</h3>

                        <div class="col">

                           <div id="bar"></div>

                        </div>
                     </section>
                  </div>

                  <div class="col-md-4">
                     <section id="price-rating">
                        <h3 class="display-5"> <i class="fas fa-star-half-alt"></i> Price VS Points</h3>

                        <div class="col">
                           <div id="scatter"></div>

                        </div>
                     </section>
                  </div>
               </div>
               <div class="row bg-light">
                  <div class="col-md-6 col-sm-12">
                     <section id="winery">
                        <h3 class="display-5"> <i class="fas fa-tree"></i> Winery the Wine Came From</h3>
                        <div id="pie"></div>

                     </section>
                  </div>

                  <div class="col-md-6 col-sm-12">
                     <section id="variety">
                        <h3 class="display-5"> <i class="fas fa-draw-polygon"></i> Variety of Wine</h3>

                        <div class="col">

                           <div id="pie2"></div>
                        </div>

                     </section>
                  </div>
                  
                  
               </div>
               <div class="col-md-12 col-sm-12">
                     <section id="reviews">
                        <h3 class="display-5"> <i class="fas fa-comments"></i> Reviews</h3>
                        <div style="clear: both">
                           <div class="dc-data-grid" id="mygrid">

                           </div>

                        </div>
                     </section>
                  </div>

            </div>
         </div>

      </div>

   </div>
   <footer class="page-footer font-small blue pt-4">

      <div class="container-fluid text-center text-md-left">
         <div class="row bg-dark">
            <div class="col-md-6 mt-md-0 mt-3">

               <h5 class="text-uppercase" style="color: white">Thank you</h5>
               <p style="color: white">Thanks for visiting us</p>

            </div>

            <hr class="clearfix w-100 d-md-none pb-3">

            <div class="col-md-4 mb-md-0 mb-3">
               <h5 class="text-uppercase" style="color: white"> Follow us here</h5>

               <ul class="list-unstyled">
                  <li>
                     <a href="#"><i class="fa fa-facebook fa-2x"></i> Facebook</a>
                  </li>
                  <li>
                     <a href="#"><i class="fa fa-twitter fa-2x"></i> Twitter</a>
                  </li>
                  <li>
                     <a href="#"><i class="fa fa-instagram fa-2x"></i> Instagram</a>
                  </li>
                  <li>
                     <a href="#"><i class="fa fa-youtube fa-2x"></i> YouTube</a>
                  </li>
               </ul>

            </div>

         </div>


      </div>

      <div class="footer-copyright text-center py-3">Â© 2019 Copyright:
         <a href="#"> W<span><i class="fas fa-wine-bottle"></i></span>ne Not? Creators</a>
      </div>

   </footer>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.8/dc.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/queue-async/1.0.7/queue.min.js"></script>

   <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
      integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
      crossorigin="anonymous"></script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
      integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
      crossorigin="anonymous"></script>



   <script>

      var barChart = dc.barChart('#line');
      var barChart2 = dc.barChart('#bar');
      var pieChart = dc.pieChart('#pie');
      var pieChart2 = dc.pieChart('#pie2');
      var countChart = dc.dataCount("#mystats");
      var gridChart = dc.dataGrid("#mygrid");
      var scatterPlot = dc.scatterPlot('#scatter');
      var numCountry = dc.numberDisplay('#numCountry');
      var pnGroup = dc.numberDisplay('#pnGroup');
      var tdgGroup = dc.numberDisplay('#tdgGroup');
      var reviewGrid = dc.dataGrid('#review-data');

      d3.csv("./Data/DataSlice2.csv", function (errors, people) {
         var mycrossfilter = crossfilter(people);

         var filteringCountry = mycrossfilter.dimension(function (d) { return d.country; });
         var f = filteringCountry.filter("US");
         var n = f.top(Infinity).length;
         filteringCountry.filterAll();


         var pn = mycrossfilter.dimension(function (d) { return d.variety; });
         var p = pn.filter("Pinot Noir");
         var num = p.top(Infinity).length;
         pn.filterAll();


         var tdg = mycrossfilter.dimension(function (d) { return d.winery; });
         var t = tdg.filter("Terre di Giurfo");
         var val = t.top(Infinity).length;
         tdg.filterAll();


         // country dimension
         var countryDimension = mycrossfilter.dimension(function (data) {
            return data.country;
         });

         var countryGroup = countryDimension.group().reduceCount();
         //winery dimension
         var wineryDimension = mycrossfilter.dimension(function (data) {
            return data.winery;
         });
         var wineryGroup = wineryDimension.group().reduceCount();

         //price dimension
         var priceDimension = mycrossfilter.dimension(function (data) {
            return data.price;
         });
         var priceGroup = priceDimension.group().reduceCount();

         //variety dimension
         var varietyDimension = mycrossfilter.dimension(function (data) {
            return data.variety;
         });
         var varietyGroup = varietyDimension.group().reduceCount();

         //pointsprice dimension
         var pointsPriceDimension = mycrossfilter.dimension(function (data) {
            return [Math.floor(data.points), Math.floor(data.price)];
         });
         var pointsPriceGroup = pointsPriceDimension.group().reduceCount();



         // DRAWING THE SVG CHARTS



         tdgGroup
            .formatNumber(d3.format(".2%"))
            .valueAccessor(function (d) {
               //in case of 0
               if (d.count == 0) {
                  return 0;
               } else {
                  return (val / mycrossfilter.size());
               }
            })
            .group(wineryGroup);

         pnGroup
            .formatNumber(d3.format(".2%"))
            .valueAccessor(function (d) {
               //in case of 0
               if (d.count == 0) {
                  return 0;
               } else {
                  return (num / mycrossfilter.size());
               }
            })
            .group(varietyGroup);

         numCountry
            .formatNumber(d3.format(".2%"))
            .valueAccessor(function (d) {
               if (d.count == 0) {
                  return 0;
               } else {
                  return (n / mycrossfilter.size());
               }
            })
            .group(countryGroup);

         scatterPlot
            .width(500)
            .height(300)
            .margins({
               top: 0,
               right: 0,
               bottom: 40,
               left: 40
            })
            .x(d3.scale.linear().domain([0, 100]))
            .y(d3.scale.linear().domain([0, 100]))
            .brushOn(false)
            .xAxisLabel("Points")
            .yAxisLabel("Price")
            .symbolSize(8)
            .clipPadding(10)
            .ordinalColors(['#FF0000', '#8B0000', '#800000', '#FF6347', '#FF4500', '#FFA07A', '#DB7093', '#FA8072', '#E9967A'])
            .dimension(pointsPriceDimension)
            .group(pointsPriceGroup);

         barChart2
            .height(300)
            .width(500)
            .x(d3.scale.linear().domain([15, 70]))
            .ordinalColors(['#FF0000', '#8B0000', '#800000', '#FF6347', '#FF4500', '#FFA07A', '#DB7093', '#FA8072', '#E9967A'])
            .brushOn(false)
            .transitionDuration(1500)
            .dimension(priceDimension)
            .group(priceGroup);

         barChart
            .height(300)
            .width(500)
            .x(d3.scale.ordinal())
            .xUnits(dc.units.ordinal)
            .ordinalColors(['#FF0000', '#8B0000', '#800000', '#FF6347', '#FF4500', '#FFA07A', '#DB7093', '#FA8072', '#E9967A'])
            .brushOn(false)
            .transitionDuration(1500)
            .dimension(countryDimension)
            .group(countryGroup);

         pieChart
            .width(800)
            .height(300)
            .dimension(wineryDimension)
            .ordinalColors(['#FF0000', '#8B0000', '#800000', '#FF6347', '#FF4500', '#FFA07A', '#DB7093', '#FA8072', '#E9967A'])
            .group(wineryGroup)
            .legend(dc.legend().x(0).y(50).itemHeight(13).gap(5));

         pieChart2
            .width(800)
            .height(300)
            .dimension(varietyDimension)
            .group(varietyGroup)
            .ordinalColors(['#FF0000', '#8B0000', '#800000', '#FF6347', '#FF4500', '#FFA07A', '#DB7093', '#FA8072', '#E9967A'])
            .legend(dc.legend().x(0).y(50).itemHeight(13).gap(5));

         countChart
            .dimension(mycrossfilter)
            .group(mycrossfilter.groupAll());

         gridChart
            .dimension(countryDimension)
            .group(function (data) {
               return data.title;
            })
            .size(100)
            .htmlGroup(function (d) {
               return 'Wine Title: ' + d.key +
                  '; Count: ' + d.values.length +
                  ' reviews'
            })
            .html(function (d) { return "<blockquote class=\"blockquote text-center\">" + " <i style=\"color:red\"class=\"fas fa-wine-bottle\"></i> " + d.description + "</div></br>" + "<div> <footer class=\"blockquote-footer\">" + d.taster_name + "(" + d.taster_twitter_handle + ")" + "</footer> </blockquote><br>"; })
            .sortBy(function (d) {
               return d.taster_name;
            })
            .order(d3.ascending);


         reviewGrid
            .dimension(countryDimension)
            .group(function (data) {
               return data.country
            })
            .sortBy(function (d) {
               return d.country;
            })
            .size(100)
            .htmlGroup(function (d) {
               return d.values.length
            })
            .html(function (d) { return d.country })
            .order(d3.ascending);


         dc.renderAll();

      });


   </script>

</body>

</html>